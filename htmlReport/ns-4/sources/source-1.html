


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Notebook</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">astra.data</a>
</div>

<h1>Coverage Summary for Class: Notebook (astra.data)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Notebook</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (14/14)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    56.5%
  </span>
  <span class="absValue">
    (61/108)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    80.5%
  </span>
  <span class="absValue">
    (161/200)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package astra.data;
&nbsp;
&nbsp;import astra.activity.Activity;
&nbsp;import astra.activity.ActivityList;
&nbsp;import astra.activity.Exam;
&nbsp;import astra.activity.Lecture;
&nbsp;import astra.activity.Task;
&nbsp;import astra.activity.Tutorial;
&nbsp;import astra.exception.FileSystemException;
&nbsp;import astra.gpa.GpaEntry;
&nbsp;import astra.gpa.GpaList;
&nbsp;
&nbsp;import java.io.File;
&nbsp;import java.io.FileNotFoundException;
&nbsp;import java.io.FileWriter;
&nbsp;import java.io.IOException;
&nbsp;import java.time.DayOfWeek;
&nbsp;import java.time.LocalDate;
&nbsp;import java.time.LocalTime;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.List;
&nbsp;import java.util.Scanner;
&nbsp;
&nbsp;public class Notebook {
&nbsp;    // Delimiters
&nbsp;    private static final String SEP = &quot; | &quot;;
&nbsp;    private static final String SPLIT_REGEX = &quot;\\s*\\|\\s*&quot;;
&nbsp;
&nbsp;    private String filePath;
&nbsp;
&nbsp;    // GPA related
&nbsp;    private final String gpaTxtPath;
&nbsp;    private final String gpaCsvPath;
<b class="fc">&nbsp;    private final GpaList gpaList = new GpaList();</b>
&nbsp;
<b class="fc">&nbsp;    public Notebook(String filePath) {</b>
&nbsp;
<b class="fc">&nbsp;        this.filePath = filePath;</b>
&nbsp;
&nbsp;        // derive GPA file paths in same directory
<b class="fc">&nbsp;        File f = new File(filePath);</b>
<b class="fc">&nbsp;        File dir = f.getParentFile();</b>
<b class="pc">&nbsp;        String baseDir = dir == null ? &quot;.&quot; : dir.getPath();</b>
<b class="fc">&nbsp;        this.gpaTxtPath = baseDir + File.separator + &quot;gpa.txt&quot;;</b>
<b class="fc">&nbsp;        this.gpaCsvPath = baseDir + File.separator + &quot;gpa.csv&quot;;</b>
&nbsp;
&nbsp;        // attempt to load existing GPA entries
&nbsp;        try {
<b class="fc">&nbsp;            List&lt;GpaEntry&gt; loadedGpa = loadGpaFromFile();</b>
<b class="pc">&nbsp;            for (GpaEntry e : loadedGpa) {</b>
<b class="nc">&nbsp;                gpaList.add(e);</b>
&nbsp;            }
&nbsp;        } catch (FileSystemException e) {
&nbsp;            // ignore load errors but keep list empty; caller side handles messages if needed
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Rewrite the data file according to the activities list.
&nbsp;     *
&nbsp;     * @param activities list of activities to be written to the text file
&nbsp;     * @throws IOException if the file is not found
&nbsp;     */
&nbsp;    public void saveToFile(ActivityList activities) throws IOException{
<b class="fc">&nbsp;        File file = new File(filePath);</b>
<b class="fc">&nbsp;        File directory = file.getParentFile();</b>
<b class="pc">&nbsp;        if (directory != null &amp;&amp; !directory.exists()) {</b>
<b class="nc">&nbsp;            directory.mkdirs();</b>
&nbsp;        }
<b class="fc">&nbsp;        try (FileWriter fw = new FileWriter(filePath)) {</b>
<b class="fc">&nbsp;            for (int i = 0; i &lt; activities.getListSize(); i++) {</b>
<b class="fc">&nbsp;                Activity activity = activities.getAnActivity(i);</b>
<b class="fc">&nbsp;                fw.write(activity.writeToFile() + &quot;\n&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Load the text file containing activities
&nbsp;     *
&nbsp;     * @return an ActivityList containing all the activities in the text file
&nbsp;     * @throws FileNotFoundException if the text file is not found
&nbsp;     */
&nbsp;    public ActivityList loadFile() throws FileSystemException, FileNotFoundException {
<b class="fc">&nbsp;        ActivityList activities = new ActivityList();</b>
<b class="fc">&nbsp;        File file = new File(filePath);</b>
<b class="fc">&nbsp;        File directory = file.getParentFile();</b>
<b class="pc">&nbsp;        if (directory != null &amp;&amp; !directory.exists()) {</b>
<b class="nc">&nbsp;            directory.mkdirs();</b>
&nbsp;        }
<b class="pc">&nbsp;        if (!file.exists()) {</b>
<b class="nc">&nbsp;            return activities;</b>
&nbsp;        }
<b class="fc">&nbsp;        try (Scanner fileReader = new Scanner(file)) {</b>
<b class="fc">&nbsp;            while (fileReader.hasNext()) {</b>
<b class="fc">&nbsp;                String line = fileReader.nextLine();</b>
<b class="fc">&nbsp;                addTaskFromFile(line, activities);</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return activities;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Add one activity to the activities list
&nbsp;     *
&nbsp;     * @param line one line in the text file
&nbsp;     * @param activities the target activities list to add an activity
&nbsp;     * @throws FileSystemException if the type of the activity is not among Lecture, Exam, Task and Tutorial
&nbsp;     */
&nbsp;    // type, description,...
&nbsp;    private void addTaskFromFile(String line, ActivityList activities) throws FileSystemException {
<b class="fc">&nbsp;        String[] splitLine = line.split(&quot;,&quot;, 2);</b>
<b class="fc">&nbsp;        String type = splitLine[0].trim().toLowerCase();</b>
<b class="fc">&nbsp;        String[] details = splitLine[1].split(&quot;,&quot;);</b>
&nbsp;
&nbsp;        DayOfWeek day;
<b class="pc">&nbsp;        switch (type) {</b>
&nbsp;        case &quot;lecture&quot;:
&nbsp;            // type, description, venue, day, start time, end time
<b class="fc">&nbsp;            day = DayOfWeek.of(Integer.parseInt(details[2].trim()));</b>
<b class="fc">&nbsp;            Lecture lecture = new Lecture(details[0].trim(), details[1].trim(), day,</b>
<b class="fc">&nbsp;                    LocalTime.parse(details[3].trim()), LocalTime.parse(details[4].trim()));</b>
<b class="fc">&nbsp;            activities.addActivity(lecture);</b>
&nbsp;            break;
&nbsp;        case &quot;exam&quot;:
&nbsp;            // type, description, venue, day, start time, end time
<b class="fc">&nbsp;            Exam exam = new Exam(details[0].trim(), details[1].trim(), LocalDate.parse(details[2].trim()),</b>
<b class="fc">&nbsp;                    LocalTime.parse(details[3].trim()), LocalTime.parse(details[4].trim()));</b>
<b class="fc">&nbsp;            activities.addActivity(exam);</b>
&nbsp;            break;
&nbsp;        case &quot;task&quot;:
&nbsp;            // type, description, deadline date, deadline time, isComplete, priority
<b class="fc">&nbsp;            String desc = details[0].trim();</b>
<b class="fc">&nbsp;            LocalDate date = LocalDate.parse(details[1].trim());</b>
<b class="fc">&nbsp;            LocalTime time = LocalTime.parse(details[2].trim());</b>
&nbsp;
<b class="fc">&nbsp;            boolean isComplete = false;</b>
<b class="fc">&nbsp;            int priority = 3; // default (normal priority)</b>
&nbsp;
<b class="pc">&nbsp;            if (details.length &gt;= 4) {</b>
&nbsp;                try {
&nbsp;                    // If the 4th element is boolean-ish (0/1), treat it as complete flag
<b class="pc">&nbsp;                    if (details[3].trim().equals(&quot;1&quot;) || details[3].trim().equalsIgnoreCase(&quot;true&quot;)) {</b>
<b class="fc">&nbsp;                        isComplete = true;</b>
&nbsp;                    }
&nbsp;                    // If there are 5 or more elements, treat the 5th as priority
<b class="pc">&nbsp;                    if (details.length &gt;= 5) {</b>
<b class="nc">&nbsp;                        priority = Integer.parseInt(details[4].trim());</b>
&nbsp;                    }
&nbsp;                } catch (NumberFormatException e) {
&nbsp;                    // If malformed priority, keep default 3
<b class="nc">&nbsp;                    priority = 3;</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            Task task = new Task(desc, date, time, priority);</b>
<b class="fc">&nbsp;            task.setComplete(isComplete);</b>
<b class="fc">&nbsp;            activities.addActivity(task);</b>
&nbsp;            break;
&nbsp;        case &quot;tutorial&quot;:
&nbsp;            // type, description, venue, day, start time, end time
<b class="fc">&nbsp;            day = DayOfWeek.of(Integer.parseInt(details[2].trim()));</b>
<b class="fc">&nbsp;            Tutorial tutorial = new Tutorial(details[0].trim(), details[1].trim(), day,</b>
<b class="fc">&nbsp;                    LocalTime.parse(details[3].trim()), LocalTime.parse(details[4].trim()));</b>
<b class="fc">&nbsp;            activities.addActivity(tutorial);</b>
&nbsp;            break;
&nbsp;        default:
<b class="nc">&nbsp;            throw new FileSystemException(&quot;Invalid activity type in text file.&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Loads tasks from the file system.
&nbsp;     *
&nbsp;     * @return List of tasks loaded.
&nbsp;     * @throws FileSystemException If reading or parsing fails.
&nbsp;     */
&nbsp;    public List&lt;Activity&gt; loadFromFile() throws FileSystemException {
<b class="fc">&nbsp;        List&lt;Activity&gt; activities = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        File f = new File(filePath); // create a File for the given file path</b>
&nbsp;
&nbsp;        try {
<b class="pc">&nbsp;            if (!f.exists()) {</b>
&nbsp;                // create parent directory if it doesn&#39;t exist
<b class="nc">&nbsp;                File parent = f.getParentFile();</b>
<b class="nc">&nbsp;                if (parent != null) {</b>
<b class="nc">&nbsp;                    parent.mkdirs();</b>
&nbsp;                }
<b class="nc">&nbsp;                f.createNewFile();</b>
<b class="nc">&nbsp;                return activities; // empty list</b>
&nbsp;            }
<b class="fc">&nbsp;            try (Scanner s = new Scanner(f)) {</b>
<b class="fc">&nbsp;                while (s.hasNextLine()) {</b>
<b class="fc">&nbsp;                    String line = s.nextLine();</b>
<b class="fc">&nbsp;                    activities.add(parseLine(line));</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } catch (FileSystemException e) {
&nbsp;            throw e;
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Failed to read file: &quot; + e.getMessage());</b>
&nbsp;        }
<b class="fc">&nbsp;        return activities;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Save all activities to file (overwrite)
&nbsp;     *
&nbsp;     * @param activities List of activities to save.
&nbsp;     * @throws FileSystemException If writing fails.
&nbsp;     */
&nbsp;    public void writeToFile(List&lt;Activity&gt; activities) throws FileSystemException {
&nbsp;        try {
&nbsp;            // ensure directory exists
<b class="fc">&nbsp;            File f = new File(filePath);</b>
<b class="fc">&nbsp;            File parent = f.getParentFile();</b>
<b class="pc">&nbsp;            if (parent != null &amp;&amp; !parent.exists()) {</b>
<b class="nc">&nbsp;                parent.mkdirs();</b>
&nbsp;            }
<b class="fc">&nbsp;            try (FileWriter writer = new FileWriter(filePath)) { // overwrite</b>
<b class="fc">&nbsp;                for (Activity a : activities) {</b>
<b class="fc">&nbsp;                    writer.write(serializeActivity(a) + System.lineSeparator());</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Failed to save activities: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convert file line into corresponding Activity object and check if file is currupted
&nbsp;     * 
&nbsp;     * @param line Line from the data file.
&nbsp;     * @return Corresponding Activity object.
&nbsp;     */
&nbsp;    private Activity parseLine(String line) throws FileSystemException {
<b class="pc">&nbsp;        if (line == null || line.trim().isEmpty()) {</b>
<b class="nc">&nbsp;            throw new FileSystemException(&quot;Corrupted. Empty activity line.&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        String[] parts = line.split(SPLIT_REGEX, -1);</b>
<b class="pc">&nbsp;        if (parts.length &lt; 3) {</b>
<b class="nc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Corrupted. Invalid activity format: &quot; + line);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        String type = parts[0];</b>
<b class="fc">&nbsp;        boolean done = &quot;1&quot;.equals(parts[1]);</b>
<b class="fc">&nbsp;        String description = parts[2];</b>
&nbsp;
<b class="pc">&nbsp;        switch (type) {</b>
&nbsp;        case &quot;TASK&quot;:
&nbsp;        case &quot;T&quot;: 
<b class="pc">&nbsp;            if (parts.length &lt; 5) {</b>
<b class="nc">&nbsp;                throw new FileSystemException(&quot;[ERROR] Corrupted. Invalid task: &quot; + line);</b>
&nbsp;            }
<b class="fc">&nbsp;            LocalDate d = LocalDate.parse(parts[3]);</b>
<b class="fc">&nbsp;            LocalTime tm = LocalTime.parse(parts[4]);</b>
<b class="fc">&nbsp;            Integer priority = Integer.parseInt(parts[5]);</b>
<b class="fc">&nbsp;            Task t = new Task(description, d, tm, priority);</b>
<b class="pc">&nbsp;            if (done) {</b>
<b class="fc">&nbsp;                t.setIsComplete();</b>
&nbsp;            }
<b class="fc">&nbsp;            return t;</b>
&nbsp;        case &quot;LECTURE&quot;:
&nbsp;        case &quot;LEC&quot;: {
&nbsp;            // LECTURE | done | description | venue | day | start | end
<b class="pc">&nbsp;            if (parts.length &lt; 7) {</b>
<b class="nc">&nbsp;                throw new FileSystemException(&quot;[ERROR] Corrupted. Invalid lecture: &quot; + line);</b>
&nbsp;            }
<b class="fc">&nbsp;            String desc = parts[2];</b>
<b class="fc">&nbsp;            String venue = parts[3];</b>
<b class="fc">&nbsp;            DayOfWeek day = DayOfWeek.of(Integer.parseInt(parts[4]));</b>
<b class="fc">&nbsp;            LocalTime start = LocalTime.parse(parts[5]);</b>
<b class="fc">&nbsp;            LocalTime end = LocalTime.parse(parts[6]);</b>
<b class="fc">&nbsp;            Lecture lec = new Lecture(desc, venue, day, start, end);</b>
<b class="fc">&nbsp;            return lec;</b>
&nbsp;        }
&nbsp;        case &quot;TUTORIAL&quot;:
&nbsp;        case &quot;TUT&quot;: {
&nbsp;            // TUTORIAL | done | description | venue | day | start | end
<b class="pc">&nbsp;            if (parts.length &lt; 7) {</b>
<b class="nc">&nbsp;                throw new FileSystemException(&quot;[ERROR] Corrupted. Invalid tutorial: &quot; + line);</b>
&nbsp;            }
<b class="fc">&nbsp;            String desc = parts[2];</b>
<b class="fc">&nbsp;            String venue = parts[3];</b>
<b class="fc">&nbsp;            DayOfWeek day = DayOfWeek.of(Integer.parseInt(parts[4]));</b>
<b class="fc">&nbsp;            LocalTime start = LocalTime.parse(parts[5]);</b>
<b class="fc">&nbsp;            LocalTime end = LocalTime.parse(parts[6]);</b>
<b class="fc">&nbsp;            Tutorial tut = new Tutorial(desc, venue, day, start, end);</b>
<b class="fc">&nbsp;            return tut;</b>
&nbsp;        }
&nbsp;        case &quot;EXAM&quot;:
&nbsp;        case &quot;EX&quot;: {
&nbsp;            // EXAM | done | description | venue | date | start | end
<b class="pc">&nbsp;            if (parts.length &lt; 7) {</b>
<b class="nc">&nbsp;                throw new FileSystemException(&quot;[ERROR] Corrupted. Invalid exam: &quot; + line);</b>
&nbsp;            }
<b class="fc">&nbsp;            String desc = parts[2];</b>
<b class="fc">&nbsp;            String venue = parts[3];</b>
<b class="fc">&nbsp;            LocalDate date = LocalDate.parse(parts[4]);</b>
<b class="fc">&nbsp;            LocalTime start = LocalTime.parse(parts[5]);</b>
<b class="fc">&nbsp;            LocalTime end = LocalTime.parse(parts[6]);</b>
<b class="fc">&nbsp;            Exam ex = new Exam(desc, venue, date, start, end);</b>
<b class="fc">&nbsp;            return ex;</b>
&nbsp;        }
&nbsp;
&nbsp;        default:
<b class="fc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Corrupted. Unknown task type: &quot; + type);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /** 
&nbsp;     * Convert Task object into a file line
&nbsp;     *
&nbsp;     * @param a Task object to serialize.
&nbsp;     * @return String representation for file storage.
&nbsp;     */
&nbsp;    private String serializeActivity(Activity a) {
<b class="pc">&nbsp;        String done = (a instanceof Task &amp;&amp; ((Task) a).getIsComplete()) ? &quot;1&quot; : &quot;0&quot;;</b>
<b class="fc">&nbsp;        if (a instanceof Lecture) {</b>
<b class="fc">&nbsp;            Lecture l = (Lecture) a;</b>
<b class="fc">&nbsp;            return String.join(SEP, &quot;LECTURE&quot;, done,</b>
<b class="fc">&nbsp;                safe(l.getDescription()), safe(l.getVenue()), safe(String.valueOf(l.getDay().getValue())),</b>
<b class="fc">&nbsp;                safe(l.getStartTime().toString()), safe(l.getEndTime().toString()));</b>
<b class="fc">&nbsp;        } else if (a instanceof Tutorial) {</b>
<b class="fc">&nbsp;            Tutorial t = (Tutorial) a;</b>
<b class="fc">&nbsp;            return String.join(SEP, &quot;TUTORIAL&quot;, done,</b>
<b class="fc">&nbsp;                safe(t.getDescription()), safe(t.getVenue()), safe(String.valueOf(t.getDay().getValue())),</b>
<b class="fc">&nbsp;                safe(t.getStartTime().toString()), safe(t.getEndTime().toString()));</b>
<b class="fc">&nbsp;        } else if (a instanceof Exam) {</b>
<b class="fc">&nbsp;            Exam ex = (Exam) a;</b>
<b class="fc">&nbsp;            return String.join(SEP, &quot;EXAM&quot;, done,</b>
<b class="fc">&nbsp;                safe(ex.getDescription()), safe(ex.getVenue()),</b>
<b class="fc">&nbsp;                safe(ex.getDate().toString()),</b>
<b class="fc">&nbsp;                safe(ex.getStartTime().toString()), safe(ex.getEndTime().toString()));</b>
<b class="pc">&nbsp;        } else if (a instanceof Task) {</b>
<b class="fc">&nbsp;            Task t = (Task) a;</b>
<b class="fc">&nbsp;            return String.join(SEP, &quot;TASK&quot;, done,</b>
<b class="fc">&nbsp;                safe(t.getDescription()),</b>
<b class="fc">&nbsp;                safe(t.getDeadlineDate().toString()),</b>
<b class="fc">&nbsp;                safe(t.getDeadlineTime().toString()),</b>
<b class="fc">&nbsp;                safe(String.valueOf(t.getPriority())));</b>
&nbsp;        } else {
&nbsp;            // Generic fallback
<b class="nc">&nbsp;            return String.join(SEP, &quot;TASK&quot;, done, safe(a.toString()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private static String safe(String s) {
<b class="pc">&nbsp;        return s == null ? &quot;&quot; : s;</b>
&nbsp;    }
&nbsp;
&nbsp;    // GPA persistence and accessors
&nbsp;    public GpaList getGpaList() {
<b class="fc">&nbsp;        return gpaList;</b>
&nbsp;    }
&nbsp;
&nbsp;    public List&lt;GpaEntry&gt; loadGpaFromFile() throws FileSystemException {
<b class="fc">&nbsp;        List&lt;GpaEntry&gt; list = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        File f = new File(gpaTxtPath);</b>
&nbsp;        try {
<b class="fc">&nbsp;            if (!f.exists()) {</b>
<b class="fc">&nbsp;                File parent = f.getParentFile();</b>
<b class="pc">&nbsp;                if (parent != null &amp;&amp; !parent.exists()) {</b>
<b class="nc">&nbsp;                    parent.mkdirs();</b>
&nbsp;                }
<b class="fc">&nbsp;                f.createNewFile();</b>
<b class="fc">&nbsp;                return list;</b>
&nbsp;            }
<b class="fc">&nbsp;            try (Scanner s = new Scanner(f)) {</b>
<b class="pc">&nbsp;                while (s.hasNextLine()) {</b>
<b class="nc">&nbsp;                    String line = s.nextLine().trim();</b>
<b class="nc">&nbsp;                    if (line.isEmpty()) {</b>
&nbsp;                        continue;
&nbsp;                    }
<b class="nc">&nbsp;                    String[] parts = line.split(SPLIT_REGEX);</b>
<b class="nc">&nbsp;                    if (parts.length != 4 || !parts[0].equalsIgnoreCase(&quot;GPA&quot;)) {</b>
<b class="nc">&nbsp;                        throw new FileSystemException(&quot;[ERROR] Corrupted. Invalid GPA line: &quot; + line);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    String subject = parts[1].trim();</b>
<b class="nc">&nbsp;                    String grade = parts[2].trim();</b>
<b class="nc">&nbsp;                    int mc = Integer.parseInt(parts[3].trim());</b>
<b class="nc">&nbsp;                    list.add(new GpaEntry(subject, grade, mc));</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } catch (IOException | RuntimeException e) {
<b class="nc">&nbsp;            if (e instanceof FileSystemException) {</b>
<b class="nc">&nbsp;                throw (FileSystemException) e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Failed to read GPA: &quot; + e.getMessage());</b>
&nbsp;        }
<b class="fc">&nbsp;        return list;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void writeGpaToFile(List&lt;GpaEntry&gt; entries) throws FileSystemException {
&nbsp;        try {
<b class="fc">&nbsp;            File f = new File(gpaTxtPath);</b>
<b class="fc">&nbsp;            File parent = f.getParentFile();</b>
<b class="pc">&nbsp;            if (parent != null &amp;&amp; !parent.exists()) {</b>
<b class="nc">&nbsp;                parent.mkdirs();</b>
&nbsp;            }
<b class="fc">&nbsp;            try (FileWriter w = new FileWriter(gpaTxtPath)) {</b>
<b class="fc">&nbsp;                for (GpaEntry e : entries) {</b>
<b class="fc">&nbsp;                    w.write(e.toPipe());</b>
<b class="fc">&nbsp;                    w.write(System.lineSeparator());</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Failed to save GPA: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void writeGpaCsv(List&lt;GpaEntry&gt; entries) throws FileSystemException {
&nbsp;        try {
<b class="fc">&nbsp;            File f = new File(gpaCsvPath);</b>
<b class="fc">&nbsp;            File parent = f.getParentFile();</b>
<b class="pc">&nbsp;            if (parent != null &amp;&amp; !parent.exists()) {</b>
<b class="nc">&nbsp;                parent.mkdirs();</b>
&nbsp;            }
<b class="fc">&nbsp;            try (FileWriter w = new FileWriter(gpaCsvPath)) {</b>
<b class="fc">&nbsp;                w.write(&quot;Subject,Grade,MC\n&quot;);</b>
<b class="fc">&nbsp;                for (GpaEntry e : entries) {</b>
<b class="fc">&nbsp;                    w.write(e.toCsv());</b>
<b class="fc">&nbsp;                    w.write(System.lineSeparator());</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            throw new FileSystemException(&quot;[ERROR] Failed to save GPA CSV: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void saveGpa() throws FileSystemException {
<b class="fc">&nbsp;        writeGpaToFile(gpaList.toList());</b>
<b class="fc">&nbsp;        writeGpaCsv(gpaList.toList());</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-10-22 12:53</div>
</div>
</body>
</html>
