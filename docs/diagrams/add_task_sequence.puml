@startuml
!include style.puml
actor User
participant Astra
participant Parser
participant C as "AddTaskCommand"
participant AL as "ActivityList"
participant NB as "Notebook"
participant UI as "Ui"

User -> Astra: input "task <desc> /by <date> <time> /priority <n>"
Astra -> Parser: parse(input)
Parser --> Astra: new AddTaskCommand(input)
Astra -> C: execute(AL, UI, NB)
group validate and parse
	C -> C: check '/by' and '/priority'
	C -> C: parse priority (int)
	C -> AL: toList()
	C -> C: count Task entries; validate bounds
	C -> C: DateTimeParser.parseDate/parseTime
end
C -> AL: addTaskWithPriority(Task(desc,date,time,1), priority)
C -> UI: showMessage(task.toString())
C -> NB: saveToFile(activities)
C --> Astra: return shouldExit=false
@enduml