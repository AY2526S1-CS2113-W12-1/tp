@startuml
'https://plantuml.com/sequence-diagram
!include style.puml
hide footbox
 actor User
 participant Astra
 participant Parser
 participant AddTaskCommand
 participant Task
 participant ActivityList
 participant Ui
 participant Notebook

 ' Step 1: User input is parsed
 User -> Astra: input "task <desc> /by <date> <time> /priority <n>"
 activate Astra
 Astra -> Parser : parse(input)
 activate Parser

 ' Parser creates AddTaskCommand
 create AddTaskCommand
 Parser -> AddTaskCommand : new AddTaskCommand(input)
 activate AddTaskCommand
 AddTaskCommand --> Parser
 deactivate AddTaskCommand

 ' Parser returns command to User
 Parser --> Astra : AddTaskCommand
 deactivate Parser

 ' Step 2: User executes the command
 Astra -> AddTaskCommand : execute(activities, ui, notebook)
 activate AddTaskCommand

 ' Inside execute(): create a new Task
 create Task
 AddTaskCommand -> Task
 activate Task
 Task --> AddTaskCommand
 deactivate Task

 ' Add the task to ActivityList
 AddTaskCommand -> ActivityList : addTaskWithPriority(task,int)
 activate ActivityList
 ActivityList --> AddTaskCommand
 deactivate ActivityList

 ' Show a message through Ui
 AddTaskCommand -> Ui : showMessage("Task added successfully")
 activate Ui
 Ui --> AddTaskCommand
 deactivate Ui

 ' Save to file using Notebook
 AddTaskCommand -> Notebook : saveToFile()
 activate Notebook
 Notebook --> AddTaskCommand
 deactivate Notebook

 ' Return value to user
 AddTaskCommand --> Astra : false
 deactivate AddTaskCommand
 AddTaskCommand -[hidden]-> AddTaskCommand
 destroy AddTaskCommand
 Astra -->User
@enduml